<!DOCTYPE html>
<html lang="en" >
<head>
	<meta charset="UTF-8">
	<title>Beam</title>
	<style type="text/css">
		body,html{margin:0;padding:0;overflow:hidden;}body canvas{display:block;}
	</style>
</head>
<body>
	<canvas id="beam"></canvas>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js'></script>
	<script type="text/javascript">
		!function(t,e){var n=Math.floor,i=(Math.abs,function(t,e){return(t<<e&4294967295|t>>>32-e)>>>0}),r=function(t){this.a=4058668781,this.b=t,this.c=t,this.d=t,this.s=0};r.prototype.seed=function(t){this.a=4058668781,this.b=t,this.c=t,this.d=t,this.s=0},r.prototype.seedAll=function(t,e,n){this.a=4058668781,this.b=t,this.c=e,this.d=n,this.s=0},r.prototype.randval=function(){var t=(this.a-i(this.b,27)&4294967295)>>>0;return this.a=(4294967295&(this.b^i(this.c,17)))>>>0,this.b=(this.c+this.d&4294967295)>>>0,this.c=(this.d+t&4294967295)>>>0,this.d=(t+this.a&4294967295)>>>0,this.s++,this.d},r.prototype.step=function(t){0===(t="number"==typeof t?t:1)&&(t=1);for(var e=0;e<t;e++){var n=(this.a-i(this.b,27)&4294967295)>>>0;this.a=(4294967295&(this.b^i(this.c,17)))>>>0,this.b=(this.c+this.d&4294967295)>>>0,this.c=(this.d+n&4294967295)>>>0,this.d=(n+this.a&4294967295)>>>0,this.s++}},r.prototype.random=function(){var t=this.randval()%2147483647/2147483647;switch(arguments.length){case 0:return t;case 1:return(e=arguments[0])<1?(console.log("upper limit invalid"),null):n(t*e)+1;case 2:var e,i=arguments[0];return i>=(e=arguments[1])?(console.log("upper limit invalid"),null):n(t*(e-i+1))+i;default:console.log("invalid amount of arguments")}return null},t.SmallPRNG=r}(window),this.Element&&Element.prototype.attachEvent&&!Element.prototype.addEventListener&&function(){function t(t,e){Window.prototype[t]=HTMLDocument.prototype[t]=Element.prototype[t]=e}function e(t){e.interval&&document.body&&(e.interval=clearInterval(e.interval),document.dispatchEvent(new CustomEvent("DOMContentLoaded")))}t("addEventListener",function(t,e){var n=this,i=n.addEventListener.listeners=n.addEventListener.listeners||{},r=i[t]=i[t]||[];r.length||n.attachEvent("on"+t,r.event=function(t){var e=n.document&&n.document.documentElement||n.documentElement||{scrollLeft:0,scrollTop:0};t.currentTarget=n,t.pageX=t.clientX+e.scrollLeft,t.pageY=t.clientY+e.scrollTop,t.preventDefault=function(){t.returnValue=!1},t.relatedTarget=t.fromElement||null,t.stopImmediatePropagation=function(){s=!1,t.cancelBubble=!0},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,t.timeStamp=+new Date;for(var i,o=0,a=[].concat(r),s=!0;s&&(i=a[o]);++o)for(var h,u=0;h=r[u];++u)if(h==i){h.call(n,t);break}}),r.push(e)}),t("removeEventListener",function(t,e){for(var n,i=this.addEventListener.listeners=this.addEventListener.listeners||{},r=i[t]=i[t]||[],o=r.length-1;n=r[o];--o)if(n==e){r.splice(o,1);break}!r.length&&r.event&&this.detachEvent("on"+t,r.event)}),t("dispatchEvent",function(t){var e=t.type,n=this.addEventListener.listeners=this.addEventListener.listeners||{},i=n[e]=n[e]||[];try{return this.fireEvent("on"+e,t)}catch(e){return void(i.event&&i.event(t))}}),Object.defineProperty(Window.prototype,"CustomEvent",{get:function(){var t=this;return function(e,n){var i,r=t.document.createEventObject();for(i in r.type=e,n)"cancelable"==i?r.returnValue=!n.cancelable:"bubbles"==i?r.cancelBubble=!n.bubbles:"detail"==i&&(r.detail=n.detail);return r}}}),e.interval=setInterval(e,1),window.addEventListener("load",e)}(),!this.CustomEvent&&(window.CustomEvent=function(t,e){var n;e=e||{bubbles:!1,cancelable:!1,detail:void 0};try{(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail)}catch(i){(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable),n.detail=e.detail}return n}),function(){"use strict";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},"create"in Object&&"function"==typeof Object.create||(Object.create=function(){var t=function(){};return function(e){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof e)throw TypeError("Argument must be an object");t.prototype=e;var n=new t;return t.prototype=null,n}}())}(),function(){"use strict";"extend"in Function.prototype&&"function"==typeof Function.prototype.extend||(Function.prototype.extend=function(t){return function(t,e){return e.prototype=Object.create(t.prototype),e.parent=t,e.prototype.constructor=e,e}(this,t)})}(),function(t){"use strict";window.Easing={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}}(),function(t){"use strict";"Math"in t||(t.Math={}),"Util"in t||(t.Util={});var e=t.Math,n=t.Util;e.Tau=2*e.PI,e.map=function(t,e,n,i,r){return(t-e)*(r-i)/(n-e)+i},e.dist=function(t,e,n,i){var r=t-n,o=e-i;return Math.sqrt(r*r+o*o)},e.lineIntersect=function(t,e,n,i,r,o,a,s){return that instanceof PointLine?(f=((c=a-r)*(e-o)-(l=s-o)*(t-r))/(-c*(u=i-e)+(h=n-t)*l),(d=(-u*(t-r)+h*(e-o))/(-c*u+h*l))>=0&&d<=1&&f>=0&&f<=1?{x:Math.floor(t+f*h),y:Math.floor(e+f*u)}:null):null;var h,u,c,l,d,f},e.rad=function(t){return t*(Math.PI/180)},e.deg=function(t){return t*(180/Math.PI)},e.pointOnCircle=function(t,n,i,r){return{x:t+i*Math.cos(e.rad(r)),y:n+i*Math.sin(e.rad(r))}},e.lineProgress=function(t,e,n,i,r){return{x:t+(n-t)*r,y:e+(i-e)*r}},e.randInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.mrandInt=function(t){return Math.floor(Math.random()*t)},e.randFloat=function(t,e){return Math.random()*(e-t+1)+t},e.mrandFloat=function(t){return Math.random()*t},e.randSign=function(){return Math.random()>.5?-1:1},e.scale=function(t,e,n,i){var r,o;return t>n&&(r=n,o=n/t*e),e>i&&(r=i/e*t,o=i),{w:Math.floor(r),h:Math.floor(o)}},n.easer=function(t,e,n){var i=Date.now()-e,r=t(i/n);return i>=n&&(r=1),r}}(window),function(t){"use strict";var e=function(t){return 2!==t.length?t+t:t},n=/\#([0-9a-f]{1,2})([0-9a-f]{1,2})([0-9a-f]{1,2})/i,i=function(t,e,n,i){i=i||1,this.r=t,this.g=e,this.b=n,this.a=i};i.prototype.toString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},i.fromHex=function(t){if("string"!=typeof t)throw new TypeError("hexadecimal color must be a string");if(4!==t.length&&7!==t.length)throw new TypeError("invalid hexadecimal format");var r=new i,o=t.match(n);if(!o)throw new TypeError("invalid hexadecimal format");return r.r=parseInt(e(o[1]),16),r.g=parseInt(e(o[2]),16),r.b=parseInt(e(o[3]),16),r.a=1,r},i.random=function(t,e){return new i(Math.randInt(t,e),Math.randInt(t,e),Math.randInt(t,e),1)},i.randomEx=function(t){return new i(Math.randInt(t.rmin,t.rmax),Math.randInt(t.gmin,t.gmax),Math.randInt(t.bmin,t.bmax),1)};var r=function(t,e,n){this.r=t,this.g=e,this.b=n};r.prototype.toString=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},r.fromHex=function(t){if("string"!=typeof t)throw new TypeError("hexadecimal color must be a string");if(4!==t.length&&7!==t.length)throw new TypeError("invalid hexadecimal format");var i=new r,o=t.match(n);if(!o)throw new TypeError("invalid hexadecimal format");return i.r=parseInt(e(o[1]),16),i.g=parseInt(e(o[2]),16),i.b=parseInt(e(o[3]),16),i},r.random=function(t,e){return new r(Math.randInt(t,e),Math.randInt(t,e),Math.randInt(t,e))},r.randomEx=function(t){return new r(Math.randInt(t.rmin,t.rmax),Math.randInt(t.gmin,t.gmax),Math.randInt(t.bmin,t.bmax))},t.RGBA=i,t.RGB=r}(window),function(t){"use strict";var e=function(t,e,n){this.set(t,e,n)},n=e.prototype;n.dot2d=function(t,e){return this.x*t+this.y*e},n.dot3d=function(t,e,n){return this.x*t+this.y*e+this.z*n},n.set=function(t,e,n){return this.x=t,this.y=e,this.z=n,this},n.add=function(t){return"number"==typeof t?(this.x+=t,this.y+=t,this.z+=t,this):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},n.sub=function(t){return"number"==typeof t?(this.x-=t,this.y-=t,this.z-=t,this):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},n.mul=function(t){return"number"==typeof t?(this.x*=t,this.y*=t,this.z*=t,this):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},n.div=function(t){return"number"==typeof t?(this.x/=t,this.y/=t,this.z/=t,this):(this.x/=t.x,this.y/=t.y,this.z/=t.z,this)},n.move=function(t){return t instanceof e&&(t.x=this.x,t.y=this.y,t.z=this.z),this},n.within2d=function(t){return this.x>=0&&this.x<t.x&&this.y>=0&&this.y<t.y},n.wrap2d=function(t){return this.x>t.x?(this.x=0,!0):this.x<0?(this.x=t.x,!0):this.y>t.y?(this.y=0,!0):this.y<0?(this.y=t.y,!0):void 0},n.eq=function(t){return t instanceof e&&this.x===t.x&&this.y===t.y&&this.z===t.z},n.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},n.clone=function(){return new e(this.x,this.y,this.z)},t.Vector3D=e}(window),function(t){"use strict";var e=function(){this.grad3=[new Vector3D(1,1,0),new Vector3D(-1,1,0),new Vector3D(1,-1,0),new Vector3D(-1,-1,0),new Vector3D(1,0,1),new Vector3D(-1,0,1),new Vector3D(1,0,-1),new Vector3D(-1,0,-1),new Vector3D(0,1,1),new Vector3D(0,-1,1),new Vector3D(0,1,-1),new Vector3D(0,-1,-1)],this.p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.permutation=new Array(512),this.gradP=new Array(512),this.F2=.5*(Math.sqrt(3)-1),this.G2=(3-Math.sqrt(3))/6,this.F3=1/3,this.G3=1/6},n=e.prototype;n.init=function(t){if("function"!=typeof t)throw new TypeError("prng needs to be a function returning an int between 0 and 255");for(var e=0;e<256;e+=1){var n=this.p[e]^t();this.permutation[e]=this.permutation[e+256]=n,this.gradP[e]=this.gradP[e+256]=this.grad3[n%this.grad3.length]}},n.simplex3d=function(t,e,n){var i,r,o,a,s,h,u,c,l,d,f,p,m,v,w,y,g,b,x,E,M,I,D,L=(t+e+n)*this.F3,C=Math.floor(t+L),P=Math.floor(e+L),O=Math.floor(n+L),T=(C+P+O)*this.G3,z=t-C+T,V=e-P+T,F=n-O+T;return z>=V?V>=F?(i=1,r=0,o=0,a=1,s=1,h=0):z>=F?(i=1,r=0,o=0,a=1,s=0,h=1):(i=0,r=0,o=1,a=1,s=0,h=1):V<F?(i=0,r=0,o=1,a=0,s=1,h=1):z<F?(i=0,r=1,o=0,a=0,s=1,h=1):(i=0,r=1,o=0,a=1,s=1,h=0),u=z-i+this.G3,c=V-r+this.G3,l=F-o+this.G3,d=z-a+2*this.G3,f=V-s+2*this.G3,p=F-h+2*this.G3,m=z-1+3*this.G3,v=V-1+3*this.G3,w=F-1+3*this.G3,C&=255,P&=255,O&=255,y=this.gradP[C+this.permutation[P+this.permutation[O]]],g=this.gradP[C+i+this.permutation[P+r+this.permutation[O+o]]],b=this.gradP[C+a+this.permutation[P+s+this.permutation[O+h]]],x=this.gradP[C+1+this.permutation[P+1+this.permutation[O+1]]],M=.6-u*u-c*c-l*l,I=.6-d*d-f*f-p*p,D=.6-m*m-v*v-w*w,32*(((E=.6-z*z-V*V-F*F)<0?0:(E*=E)*E*y.dot3d(z,V,F))+(M<0?0:(M*=M)*M*g.dot3d(u,c,l))+(I<0?0:(I*=I)*I*b.dot3d(d,f,p))+(D<0?0:(D*=D)*D*x.dot3d(m,v,w)))},t.Perlin=e}(window),function(t){"use strict";function e(t,e){if(null==e.pageX&&null!=e.clientX){var n=e.target&&e.target.ownerDocument||document,i=n.documentElement,r=n.body;e.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)}t.position.x=e.pageX,t.position.y=e.pageY}window.MouseMonitor=function(t){this.position=new Vector3D(0,0,0),this.state={left:!1,middle:!1,right:!1},this.element=t;var n=this;t.addEventListener("mousemove",function(t){return t=t||window.event,e(n,t),t.preventDefault()}),t.addEventListener("contextmenu",function(t){return t.preventDefault()}),t.addEventListener("mousedown",function(t){return 1===t.which&&(n.state.left=!0),2===t.which&&(n.state.middle=!0),3===t.which&&(n.state.right=!0),t.preventDefault()}),t.addEventListener("mouseup",function(t){return n.state.left=n.state.middle=n.state.right=!1,t.preventDefault()}),t.addEventListener("touchmove",function(t){return t=t||window.event,e(n,t.touches[0]),t.preventDefault()}),t.addEventListener("touchstart",function(t){var e=Math.floor(3*Math.random())+1;return 1===e&&(n.state.left=!0),2===e&&(n.state.middle=!0),3===e&&(n.state.right=!0),t.preventDefault()}),t.addEventListener("touchend",function(t){return n.state.left=n.state.middle=n.state.right=!1,t.preventDefault()})}}(),function(t){"use strict";var e=function(t,e,n,i){this.p=new Vector3D,this.t=new Vector3D,this.v=new Vector3D,this.g=t,this.b=e,this.r=n,this.m=i,this.reset()},n=e.prototype;n.reset=function(){this.p.x=this.t.x=Math.floor(this.r.random()*this.b.x),this.p.y=this.t.y=Math.floor(this.r.random()*this.b.y),this.v.set(1,1,0),this.i=0,this.l=this.r.random(1e3,1e4)},n.step=function(){this.i++>this.l&&this.reset();var t=this.p.x/200,e=this.p.y/200,n=Date.now()/5e3,i=this.r.random()*Math.Tau,r=this.r.random()/4;if(this.v.x+=r*Math.sin(i)+this.g.simplex3d(t,e,-n),this.v.y+=r*Math.cos(i)+this.g.simplex3d(t,e,n),this.m.state.left&&this.v.add(this.m.position.clone().sub(this.p).mul(85e-5)),this.m.state.right&&this.p.distance(this.m.position)<this.r.random(200,250)&&this.v.add(this.p.clone().sub(this.m.position).mul(.02)),this.m.state.middle){var o=this.p.distance(this.m.position),a=this.r.random(200,250);o<a&&this.v.mul(o/a)}this.p.move(this.t).add(this.v.mul(.94)),this.p.wrap2d(this.b)&&this.p.move(this.t)},n.render=function(t){t.moveTo(this.t.x,this.t.y),t.lineTo(this.p.x,this.p.y)},t.Particle=e}(window),window.addEventListener("load",function(){var t,e,n,i=new SmallPRNG(+new Date),r=new Perlin,o=document.getElementById("beam"),a=o.getContext("2d"),s=new MouseMonitor(o),h=new dat.GUI,u=0,c=[],l=new Vector3D(0,0,0),d={particleNum:5e3,fadeOverlay:!0,rotateColor:!0,staticColor:"#9a1aff"},f=h.addFolder("Particles"),p=h.addFolder("Colors");f.add(d,"particleNum",1e3,2e4).step(10).name("Particles").onChange(function(){if(d.particleNum<c.length){var t=c.length-d.particleNum;c.splice(c.length-t,t)}else for(var e=c.length;e<d.particleNum;e+=1)c.push(new Particle(r,l,i,s))}),p.add(d,"fadeOverlay").name("Fade Clear").onChange(function(){d.fadeOverlay&&t()}),p.add(d,"rotateColor").name("Rotate Color"),p.addColor(d,"staticColor").name("Static Color"),f.open(),p.open(),h.close(),r.init(function(){return i.random(0,255)}),(t=function(){o.width=e=l.x=window.innerWidth,o.height=n=l.y=window.innerHeight,a.fillStyle="#ffffff",a.fillRect(0,0,e,n)})(),window.addEventListener("resize",t);for(var m=0;m<d.particleNum;m+=1)c.push(new Particle(r,l,i,s));!function t(){requestAnimFrame(t),a.beginPath();for(var i=0;i<c.length;i+=1)c[i].step(),c[i].render(a);a.globalCompositeOperation="source-over",a.fillStyle=d.fadeOverlay?"rgba(0, 0, 0, .085)":"rgba(0, 0, 0, 1)",a.fillRect(0,0,e,n),a.globalCompositeOperation="lighter",a.strokeStyle=d.rotateColor?"hsla("+u+", 75%, 50%, .55)":d.staticColor,a.stroke(),a.closePath(),u=(u+.5)%360}()});
	</script>
</body>
</html>
